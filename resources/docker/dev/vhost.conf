<VirtualHost *:80>
    DocumentRoot /srv/app/public/

    <Directory "/srv/app/">
        AllowOverride all
        Require all granted
    </Directory>

    LogFormat "%{X-Forwarded-For}i %h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\" %T" ourAccessLogFormat

    # leave defualt log location as docker image usually sends this to stdout
    CustomLog ${APACHE_LOG_DIR}/access.log ourAccessLogFormat
    ErrorLog ${APACHE_LOG_DIR}/error.log

    # log on our app folder so we can ship it to external logging service (rotate daily)
	CustomLog "|/usr/bin/rotatelogs /srv/app/logs/apache/access/access.%Y-%m-%d.log 86400" ourAccessLogFormat
    ErrorLog "|/usr/bin/rotatelogs /srv/app/logs/apache/error/error.%Y-%m-%d.log 86400"

    # Note: Use "environment" directive in docker-compose.yml instead of setting the APP_KEY_2 here
    #SetEnv APP_KEY_2 "f5b801ca5cb0b4aa270e8fa00f72636cb637ada2991432a5"

</VirtualHost>